<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zidan AI - الذكاء الاصطناعي المتكامل</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #10a37f;
            --primary-dark: #0d8a6d;
            --secondary: #5436da;
            --accent: #ff6b6b;
            --dark: #1a1a2e;
            --darker: #0f0f1a;
            --light: #f5f5f7;
            --gray: #8e8ea0;
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
            --glow: 0 0 20px rgba(16, 163, 127, 0.3);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--darker);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(16, 163, 127, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(84, 54, 218, 0.1) 0%, transparent 20%);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        header {
            padding: 15px 0;
            position: relative;
            z-index: 10;
            background: rgba(26, 26, 46, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            width: 45px;
            height: 45px;
            background: var(--gradient);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            box-shadow: var(--glow);
        }
        
        .logo-text {
            font-size: 24px;
            font-weight: 800;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(16, 163, 127, 0.3);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }
        
        nav a {
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            position: relative;
            padding: 8px 0;
            font-size: 15px;
        }
        
        nav a:hover {
            color: var(--primary);
        }
        
        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 0;
            height: 2px;
            background: var(--gradient);
            transition: width 0.3s;
        }
        
        nav a:hover::after {
            width: 100%;
        }
        
        .ai-status {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(16, 163, 127, 0.1);
            padding: 6px 15px;
            border-radius: 50px;
            border: 1px solid rgba(16, 163, 127, 0.3);
            font-size: 14px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10d67a;
            animation: pulse 2s infinite;
        }
        
        .chat-container {
            display: flex;
            flex: 1;
            gap: 20px;
            padding: 20px 0;
            height: calc(100vh - 80px);
        }
        
        .sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .new-chat-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .new-chat-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 163, 127, 0.4);
        }
        
        .chat-history {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .chat-history-title {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .chat-item {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--gray);
        }
        
        .chat-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--light);
        }
        
        .chat-item.active {
            background: rgba(16, 163, 127, 0.1);
            color: var(--light);
        }
        
        .chat-item i {
            font-size: 16px;
        }
        
        .main-chat {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            overflow: hidden;
        }
        
        .chat-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .chat-avatar {
            width: 40px;
            height: 40px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .chat-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .message {
            max-width: 85%;
            padding: 15px 20px;
            border-radius: 18px;
            line-height: 1.5;
            position: relative;
            animation: fadeIn 0.3s ease-out;
        }
        
        .user-message {
            align-self: flex-end;
            background: var(--primary);
            border-bottom-right-radius: 5px;
            color: white;
        }
        
        .ai-message {
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.1);
            border-bottom-left-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .message-content {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .message-time {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }
        
        .ai-message .message-time {
            text-align: left;
        }
        
        .chat-input-container {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .chat-input-wrapper {
            display: flex;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
            position: relative;
        }
        
        .chat-input-wrapper:focus-within {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(16, 163, 127, 0.2);
        }
        
        .chat-input {
            flex: 1;
            background: transparent;
            border: none;
            padding: 15px 20px;
            color: var(--light);
            font-size: 16px;
            resize: none;
            max-height: 120px;
            min-height: 60px;
            outline: none;
        }
        
        .send-btn {
            background: transparent;
            border: none;
            color: var(--gray);
            padding: 0 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .send-btn:hover {
            color: var(--primary);
        }
        
        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .thinking-indicator {
            display: none;
            padding: 15px 20px;
            align-items: center;
            gap: 10px;
            color: var(--gray);
            font-size: 14px;
        }
        
        .thinking-dots {
            display: flex;
            gap: 4px;
        }
        
        .thinking-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--gray);
            animation: bounce 1.4s infinite ease-in-out;
        }
        
        .thinking-dot:nth-child(1) {
            animation-delay: -0.32s;
        }
        
        .thinking-dot:nth-child(2) {
            animation-delay: -0.16s;
        }
        
        .suggestions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .suggestion {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            text-align: right;
        }
        
        .suggestion:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }
        
        .empty-chat {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px;
            color: var(--gray);
        }
        
        .empty-chat-icon {
            font-size: 60px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .empty-chat h2 {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--light);
        }
        
        .empty-chat p {
            font-size: 16px;
            max-width: 600px;
            line-height: 1.6;
        }
        
        .code-block {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            border-left: 3px solid var(--primary);
        }
        
        .typing-cursor {
            display: inline-block;
            width: 8px;
            height: 16px;
            background: var(--primary);
            margin-left: 2px;
            animation: blink 1s infinite;
            vertical-align: middle;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1);
            }
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
        
        /* Responsive */
        @media (max-width: 968px) {
            .sidebar {
                display: none;
            }
            
            .chat-container {
                gap: 0;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            nav ul {
                gap: 15px;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .suggestions {
                grid-template-columns: 1fr;
            }
            
            .message {
                max-width: 95%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">Z</div>
                    <div class="logo-text">Zidan AI</div>
                </div>
                <nav>
                    <ul>
                        <li><a href="#"><i class="fas fa-home"></i> الرئيسية</a></li>
                        <li><a href="#"><i class="fas fa-comments"></i> المحادثات</a></li>
                        <li><a href="#"><i class="fas fa-cogs"></i> الإعدادات</a></li>
                        <li><a href="#"><i class="fas fa-question-circle"></i> المساعدة</a></li>
                    </ul>
                </nav>
                <div class="ai-status">
                    <div class="status-dot"></div>
                    <span>Zidan AI نشط</span>
                </div>
            </div>
        </header>
        
        <div class="chat-container">
            <div class="sidebar">
                <button class="new-chat-btn" id="newChatBtn">
                    <i class="fas fa-plus"></i> محادثة جديدة
                </button>
                
                <div class="chat-history">
                    <div class="chat-history-title">المحادثات السابقة</div>
                    <div class="chat-item active">
                        <i class="fas fa-message"></i>
                        <span>مناقشة حول البرمجة</span>
                    </div>
                    <div class="chat-item">
                        <i class="fas fa-message"></i>
                        <span>أسئلة حول الذكاء الاصطناعي</span>
                    </div>
                    <div class="chat-item">
                        <i class="fas fa-message"></i>
                        <span>مساعد في كتابة الكود</span>
                    </div>
                    <div class="chat-item">
                        <i class="fas fa-message"></i>
                        <span>شرح خوارزميات التعلم الآلي</span>
                    </div>
                </div>
            </div>
            
            <div class="main-chat">
                <div class="chat-header">
                    <div class="chat-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="chat-title">Zidan AI</div>
                </div>
                
                <div class="chat-messages" id="chatMessages">
                    <div class="empty-chat" id="emptyChat">
                        <div class="empty-chat-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h2>مرحباً! أنا Zidan AI</h2>
                        <p>كيف يمكنني مساعدتك اليوم؟ أسألني عن أي شيء متعلق بالبرمجة، الذكاء الاصطناعي، أو أي موضوع آخر.</p>
                        
                        <div class="suggestions">
                            <div class="suggestion" data-prompt="اشرح لي مفهوم الذكاء الاصطناعي بكلمات بسيطة">
                                اشرح لي مفهوم الذكاء الاصطناعي بكلمات بسيطة
                            </div>
                            <div class="suggestion" data-prompt="كيف يمكنني إنشاء موقع ويب تفاعلي باستخدام JavaScript؟">
                                كيف يمكنني إنشاء موقع ويب تفاعلي باستخدام JavaScript؟
                            </div>
                            <div class="suggestion" data-prompt="ما هي أفضل طريقة لتعلم البرمجة للمبتدئين؟">
                                ما هي أفضل طريقة لتعلم البرمجة للمبتدئين؟
                            </div>
                            <div class="suggestion" data-prompt="اكتب لي كود Python لحل مشكلة حسابية معقدة">
                                اكتب لي كود Python لحل مشكلة حسابية معقدة
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="thinking-indicator" id="thinkingIndicator">
                    <div class="thinking-dots">
                        <div class="thinking-dot"></div>
                        <div class="thinking-dot"></div>
                        <div class="thinking-dot"></div>
                    </div>
                    <span>Zidan AI يفكر...</span>
                </div>
                
                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <textarea class="chat-input" id="chatInput" placeholder="اكتب رسالتك هنا... (اضغط Enter للإرسال)" rows="1"></textarea>
                        <button class="send-btn" id="sendBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // عناصر DOM
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const newChatBtn = document.getElementById('newChatBtn');
        const thinkingIndicator = document.getElementById('thinkingIndicator');
        const emptyChat = document.getElementById('emptyChat');
        
        // قاعدة معارف Zidan AI
        const aiKnowledgeBase = {
            greetings: [
                "مرحباً! كيف يمكنني مساعدتك اليوم؟",
                "أهلاً وسهلاً! أنا Zidan AI، جاهز للإجابة على أسئلتك.",
                "مرحباً بك! أنا هنا لمساعدتك في أي استفسار لديك."
            ],
            
            programming: {
                "javascript": "جافاسكريبت هي لغة برمجة عالية المستوى تستخدم principalmente لتطوير الويب. هي لغة مفسرة، كائنية التوجه، وتدريب البرمجة الوظيفية.\n\nمثال على دالة بسيطة:\n```javascript\nfunction greet(name) {\n    return `مرحباً ${name}!`;\n}\n\nconsole.log(greet('زيدان')); // مرحباً زيدان!\n```",
                
                "python": "بايثون هي لغة برمجة عالية المستوى، سهلة التعلم وقوية. تستخدم في مجالات متعددة مثل تطوير الويب، تحليل البيانات، الذكاء الاصطناعي.\n\nمثال على دالة بسيطة:\n```python\ndef greet(name):\n    return f'مرحباً {name}!'\n\nprint(greet('زيدان'))  # مرحباً زيدان!\n```",
                
                "html": "HTML هي لغة ترميز تستخدم لإنشاء هيكل صفحات الويب. تعمل مع CSS وJavaScript لإنشاء مواقع ويب كاملة.\n\nمثال على هيكل أساسي:\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>صفحتي</title>\n</head>\n<body>\n    <h1>مرحباً بالعالم!</h1>\n</body>\n</html>\n```"
            },
            
            ai: "الذكاء الاصطناعي (AI) هو مجال من علوم الكمبيوتر يهتم بإنشاء آلات قادرة على أداء المهام التي تتطلب ذكاءً بشرياً. يشمل التعلم الآلي، المعالجة اللغوية الطبيعية، الرؤية الحاسوبية وغيرها.\n\nأنواع الذكاء الاصطناعي:\n1. الذكاء الاصطناعي الضيق: متخصص في مهام محددة\n2. الذكاء الاصطناعي العام: قادر على أداء أي مهمة فكرية\n3. الذكاء الاصطناعي الفائق: يفوق الذكاء البشري في جميع المجالات",
            
            learning: "أفضل طريقة لتعلم البرمجة:\n\n1. ابدأ بلغة بسيطة مثل Python\n2. تعلم الأساسيات: المتغيرات، الشروط، الحلقات، الدوال\n3. مارس يومياً وابني مشاريع صغيرة\n4. اقرأ كود الآخرين وتعلم منهم\n5. لا تخف من ارتكاب الأخطاء، فهي جزء من التعلم\n6. انضم لمجتمعات البرمجة لتبادل المعرفة",
            
            default: "هذا سؤال مثير للاهتمام! دعني أفكر في أفضل طريقة للإجابة عليه...\n\nبشكل عام، أنا Zidan AI مصمم لمساعدتك في مجموعة واسعة من المواضيع بما في ذلك البرمجة، الذكاء الاصطناعي، الرياضيات، العلوم، وغيرها الكثير. هل يمكنك توضيح سؤالك أكثر أو طرح سؤال محدد؟"
        };
        
        // محاكاة استجابة الذكاء الاصطناعي
        function simulateAIResponse(userMessage) {
            // إظهار مؤشر التفكير
            thinkingIndicator.style.display = 'flex';
            
            return new Promise((resolve) => {
                // محاكاة وقت معالجة (بين 1-3 ثواني)
                const thinkingTime = 1000 + Math.random() * 2000;
                
                setTimeout(() => {
                    // إخفاء مؤشر التفكير
                    thinkingIndicator.style.display = 'none';
                    
                    let response = "";
                    
                    // تحليل الرسالة وتوليد رد مناسب
                    const message = userMessage.toLowerCase();
                    
                    if (message.includes("مرحبا") || message.includes("اهلا") || message.includes("اهلاً")) {
                        const greetings = aiKnowledgeBase.greetings;
                        response = greetings[Math.floor(Math.random() * greetings.length)];
                    }
                    else if (message.includes("جافا") || message.includes("javascript")) {
                        response = aiKnowledgeBase.programming.javascript;
                    }
                    else if (message.includes("بايثون") || message.includes("python")) {
                        response = aiKnowledgeBase.programming.python;
                    }
                    else if (message.includes("html") || message.includes("css")) {
                        response = aiKnowledgeBase.programming.html;
                    }
                    else if (message.includes("ذكاء اصطناعي") || message.includes("ai") || message.includes("artificial intelligence")) {
                        response = aiKnowledgeBase.ai;
                    }
                    else if (message.includes("تعلم") || message.includes("برمجة") || message.includes("مبتدئ")) {
                        response = aiKnowledgeBase.learning;
                    }
                    else if (message.includes("كود") || message.includes("برنامج") || message.includes("دالة")) {
                        response = "أحتاج إلى مزيد من التفاصيل لمساعدتك في كتابة الكود. هل يمكنك:\n\n1. تحديد لغة البرمجة التي تريد استخدامها\n2. وصف الوظيفة المطلوبة بالتفصيل\n3. ذكر أي متطلبات أو شروط خاصة\n\nمثال: 'أريد دالة في Python تقبل مصفوفة أرقام وتعيد مجموعها مع التحقق من صحة المدخلات'";
                    }
                    else {
                        response = aiKnowledgeBase.default;
                    }
                    
                    resolve(response);
                }, thinkingTime);
            });
        }
        
        // إضافة رسالة إلى الدردشة
        function addMessage(content, isUser = false) {
            // إخفاء الشاشة الفارغة إذا كانت موجودة
            if (emptyChat.style.display !== 'none') {
                emptyChat.style.display = 'none';
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            
            // إذا كان الرد يحتوي على كود، نقوم بصياغته بشكل خاص
            if (!isUser && content.includes('```')) {
                const parts = content.split('```');
                let formattedContent = '';
                
                for (let i = 0; i < parts.length; i++) {
                    if (i % 2 === 0) {
                        // نص عادي
                        formattedContent += parts[i];
                    } else {
                        // كود
                        formattedContent += `<div class="code-block">${parts[i]}</div>`;
                    }
                }
                
                messageContent.innerHTML = formattedContent;
            } else {
                messageContent.textContent = content;
            }
            
            const messageTime = document.createElement('div');
            messageTime.className = 'message-time';
            messageTime.textContent = new Date().toLocaleTimeString('ar-EG', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            messageDiv.appendChild(messageContent);
            messageDiv.appendChild(messageTime);
            
            chatMessages.appendChild(messageDiv);
            
            // التمرير إلى الأسفل لرؤية أحدث رسالة
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // إرسال رسالة
        function sendMessage() {
            const message = chatInput.value.trim();
            
            if (message === '') return;
            
            // إضافة رسالة المستخدم
            addMessage(message, true);
            
            // مسح حقل الإدخال
            chatInput.value = '';
            
            // إعادة ضبط ارتفاع حقل الإدخال
            chatInput.style.height = 'auto';
            
            // محاكاة استجابة الذكاء الاصطناعي
            simulateAIResponse(message).then(response => {
                // عرض الرد مع تأثير الكتابة
                typeResponse(response);
            });
        }
        
        // محاكاة الكتابة التدريجية للرد
        function typeResponse(response) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai-message';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            
            const messageTime = document.createElement('div');
            messageTime.className = 'message-time';
            messageTime.textContent = new Date().toLocaleTimeString('ar-EG', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            messageDiv.appendChild(messageContent);
            messageDiv.appendChild(messageTime);
            
            chatMessages.appendChild(messageDiv);
            
            let index = 0;
            const typingSpeed = 20; // ملي ثانية بين كل حرف
            
            function typeCharacter() {
                if (index < response.length) {
                    // إذا كان هناك كود في الرد، نتعامل معه بشكل خاص
                    if (response.substring(index).startsWith('```')) {
                        const codeEnd = response.indexOf('```', index + 3);
                        if (codeEnd !== -1) {
                            const codeBlock = response.substring(index, codeEnd + 3);
                            messageContent.innerHTML += `<div class="code-block">${codeBlock.substring(3, codeBlock.length - 3)}</div>`;
                            index = codeEnd + 3;
                            setTimeout(typeCharacter, typingSpeed * 5);
                            return;
                        }
                    }
                    
                    messageContent.textContent += response.charAt(index);
                    index++;
                    setTimeout(typeCharacter, typingSpeed);
                    
                    // التمرير إلى الأسفل مع كل حرف جديد
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }
            }
            
            typeCharacter();
        }
        
        // بدء محادثة جديدة
        function startNewChat() {
            chatMessages.innerHTML = '';
            emptyChat.style.display = 'flex';
            chatInput.focus();
        }
        
        // أحداث
        sendBtn.addEventListener('click', sendMessage);
        
        chatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });
        
        newChatBtn.addEventListener('click', startNewChat);
        
        // السماح لحقل الإدخال بالتوسع مع المحتوى
        chatInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });
        
        // إضافة أحداث للاقتراحات
        document.querySelectorAll('.suggestion').forEach(suggestion => {
            suggestion.addEventListener('click', function() {
                const prompt = this.getAttribute('data-prompt');
                chatInput.value = prompt;
                chatInput.focus();
            });
        });
        
        // رسالة ترحيب تلقائية عند التحميل
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (emptyChat.style.display !== 'none') {
                    const welcomeMessage = "مرحباً! أنا Zidan AI، مساعدك الذكي. يمكنني مساعدتك في:\n\n• البرمجة وتطوير الويب\n• الذكاء الاصطناعي والتعلم الآلي\n• حل المشكلات الرياضية\n• الإجابة على الأسئلة العامة\n\nلا تتردد في سؤالي عن أي شيء!";
                    typeResponse(welcomeMessage);
                    emptyChat.style.display = 'none';
                }
            }, 1000);
        });
        
        // التركيز على حقل الإدخال عند النقر في أي مكان
        document.addEventListener('click', () => {
            chatInput.focus();
        });
    </script>
</body>
</html>
